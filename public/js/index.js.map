{"version":3,"file":"index.js","sources":["../../js/classes/Player.js","../../js/scene.js"],"sourcesContent":["export default class Player {\n\tconstructor() {\n\t\tthis.geometry = new THREE.BoxGeometry(1, 0.2, 3)\n\t\tthis.material = new THREE.MeshBasicMaterial({ color: 0x883333 })\n\t\tthis.mesh = new Physijs.BoxMesh(heroGeometry, heroMaterial)\n\n\t\tthis.mesh.castShadow = true\n\t\tthis.mesh.receiveShadow = false\n\t\tthis.mesh.position.y = 1\n\t\tthis.mesh.position.x = 2\n\t\tthis.mesh.rotation.x = 2\n\t\tthis.mesh.__dirtyPosition = true\n\t}\n}\n","import Player from './classes/Player'\n\n// Physijs.scripts.worker = 'js/physijs_worker.js'\nPhysijs.scripts.ammo =\n\t'https://chandlerprall.github.io/Physijs/examples/js/ammo.js'\nvar blob = new Blob([document.querySelector('#physijs_worker').textContent])\nPhysijs.scripts.worker = window.URL.createObjectURL(blob)\n\nconsole.log(Player)\n\nlet sceneWidth\nlet sceneHeight\nlet camera\nlet scene\nlet renderer\nlet dom\nlet hero\nlet sun\nlet ground\nlet orbitControl\nlet physics\n\nlet groundWidth = 50\n\ninit()\nfunction init() {\n\t// set up the scene\n\tcreateScene()\n\n\t//call game loop\n\tupdate()\n}\n\nfunction createScene() {\n\tscene = new Physijs.Scene()\n\tscene.setGravity(new THREE.Vector3(0, -10, 0))\n\tscene.fog = new THREE.FogExp2(0xf0fff0, 0.005)\n\tcamera = new THREE.PerspectiveCamera(\n\t\t35,\n\t\twindow.innerWidth / window.innerHeight,\n\t\t0.1,\n\t\t1000\n\t)\n\tcamera.position.set(0, 20, 60)\n\tcamera.zoom = 10\n\n\tcamera.position.y = 40\n\t// camera.position.x = 10\n\t// camera.rotation.z = 10\n\tcamera.rotateX(1.2)\n\n\trenderer = new THREE.WebGLRenderer({ alpha: true })\n\trenderer.setClearColor(0x000000, 0)\n\trenderer.shadowMap.enabled = true\n\trenderer.shadowMap.type = THREE.PCFSoftShadowMap\n\n\trenderer.setSize(window.innerWidth, window.innerHeight)\n\tdocument.body.appendChild(renderer.domElement)\n\n\tconst heroGeometry = new THREE.BoxGeometry(1, 0.2, 3)\n\tconst heroMaterial = new THREE.MeshBasicMaterial({ color: 0x883333 })\n\thero = new Physijs.BoxMesh(heroGeometry, heroMaterial)\n\thero.castShadow = true\n\thero.receiveShadow = false\n\thero.position.y = 1\n\thero.position.x = 2\n\thero.rotation.x = 2\n\thero.__dirtyPosition = true\n\tscene.add(hero)\n\n\tconst texture = new THREE.TextureLoader().load('../assets/slope.jpg')\n\ttexture.wrapS = THREE.RepeatWrapping\n\ttexture.wrapT = THREE.RepeatWrapping\n\ttexture.repeat.set(10, 1000)\n\n\tconst planeMaterial = Physijs.createMaterial(\n\t\tnew THREE.MeshBasicMaterial({ map: texture, side: THREE.DoubleSide }),\n\t\t0.1,\n\t\t1 // low restitution\n\t)\n\n\tground = new Physijs.BoxMesh(\n\t\tnew THREE.PlaneGeometry(groundWidth, 10000),\n\t\tplaneMaterial,\n\t\t0\n\t)\n\tground.receiveShadow = true\n\tground.castShadow = false\n\t// ground.rotation. = -90\n\tground.rotateX(-Math.PI / 2 - 10)\n\tscene.add(ground)\n\n\t//Math.PI / 3\n\n\t// camera.rotation.z = hero.rotation.z\n\n\tsun = new THREE.PointLight(0xffffff, 1, 0)\n\tsun.position.set(10, 60, 10)\n\tsun.castShadow = true\n\tscene.add(sun)\n\t//Set up shadow properties for the sun light\n\tsun.shadow.mapSize.width = groundWidth\n\tsun.shadow.mapSize.height = 1000\n\tsun.shadow.camera.near = 0.5\n\tsun.shadow.camera.far = 1000\n\n\torbitControl = new THREE.OrbitControls(camera, renderer.domElement) //helper to rotate around in scene\n\torbitControl.update()\n\torbitControl.addEventListener('change', render)\n\torbitControl.enableZoom = false\n\n\t// var helper = new THREE.CameraHelper(sun.shadow.camera)\n\t// scene.add(helper) // enable to see the light cone\n\n\twindow.addEventListener('resize', onWindowResize, false) //resize callback\n}\n\nfunction update() {\n\tsetTimeout(() => {\n\t\trequestAnimationFrame(update) //request next update\n\t}, 1000 / 30)\n\trender()\n}\nfunction render() {\n\tscene.simulate()\n\trenderer.render(scene, camera) //draw\n\t// console.log(hero.position.y, 'y')\n\tcamera.position.z = hero.position.z + 20\n\tcamera.position.y = hero.position.y + 20\n\tcamera.position.x = hero.position.x\n\t// camera.rotation.z = hero.position.x\n\t// camera.position.z = hero.position.z + 5\n}\nfunction onWindowResize() {\n\t//resize & align\n\tsceneHeight = window.innerHeight\n\tsceneWidth = window.innerWidth\n\trenderer.setSize(sceneWidth, sceneHeight)\n\tcamera.aspect = sceneWidth / sceneHeight\n\tcamera.updateProjectionMatrix()\n}\n\nfunction handleKeyDown(keyEvent) {\n\t// sets wheel motors; configureAngularMotor params are:\n\t//   1) which_motor (as numbers matched to axes: 0 = x, 1 = y, 2 = z)\n\t//   2) low_limit (lower limit of the motor)\n\t//   3) high_limit (upper limit of the motor)\n\t//   4) velocity (target velocity)\n\t//   5) max_force (maximum force the motor can apply)\n\tswitch (keyEvent.keyCode) {\n\t\t// BUS 1\n\t\t// pivots wheels for steering\n\t\tcase 65:\n\t\tcase 37: // \"a\" key or left arrow key (turn left)\n\t\t\thero.position.x = hero.position.x - 0.5\n\t\t\thero.rotation.y = hero.rotation.y - 0.05\n\t\t\thero.__dirtyPosition = true\n\t\t\thero.__dirtyRotation = true\n\t\t\tbreak\n\t\tcase 68:\n\t\tcase 39: // \"d\" key  or right arrow key (turn right)\n\t\t\thero.position.x = hero.position.x + 0.5\n\t\t\thero.rotation.y = hero.rotation.y + 0.05\n\t\t\thero.__dirtyPosition = true\n\t\t\thero.__dirtyRotation = true\n\t\t\tbreak\n\t\tcase 32:\n\t\t\thero.position.y = hero.position.y + 2\n\t\t\thero.__dirtyPosition = true\n\t}\n}\ndocument.onkeydown = handleKeyDown\n"],"names":[],"mappings":"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"}